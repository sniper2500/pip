<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pipe & Excavation Calculator</title>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Pipe & Excavation Calculator</h1>
        <p>Professional Civil Engineering Survey Profile Analysis</p>
      </header>

      <!-- Tab Navigation -->
      <nav class="tab-navigation">
        <button class="tab-button active" data-tab="parameters">Parameters</button>
        <button class="tab-button" data-tab="structures">Structures</button>
        <button class="tab-button" data-tab="profile">Civil Survey Profile</button>
        <button class="tab-button" data-tab="table">Data Table</button>
      </nav>

      <!-- Parameters Tab -->
      <section id="parameters-tab" class="tab-content parameters-section">
        <h2>Project Parameters</h2>
        <form id="parameters-form">
          <div class="parameters-grid">
            <div class="parameter-item section-name">
              <label for="sectionName">Section Name:</label>
              <input type="text" id="sectionName" name="sectionName" value="MH-1 - IC Chamber 10">
              <div class="auto-generated-note">Auto-generated from structures</div>
            </div>
            
            <div class="parameter-item">
              <label for="pipeLength">Pipe Length (m):</label>
              <input type="number" id="pipeLength" name="pipeLength" value="35" step="0.001">
            </div>
            
            <div class="parameter-item">
              <label for="pipeDiameter">Pipe Diameter (mm):</label>
              <input type="number" id="pipeDiameter" name="pipeDiameter" value="200" step="1">
            </div>
            
            <div class="parameter-item">
              <label for="pipeThickness">Pipe Thickness (mm):</label>
              <input type="number" id="pipeThickness" name="pipeThickness" value="10" step="1">
            </div>
            
            <div class="parameter-item">
              <label for="startInvert">Start Invert Level (m):</label>
              <input type="number" id="startInvert" name="startInvert" value="601.000" step="0.001">
            </div>
            
            <div class="parameter-item">
              <label for="endInvert">End Invert Level (m):</label>
              <input type="number" id="endInvert" name="endInvert" value="600.640" step="0.001">
            </div>
            
            <div class="parameter-item slope-calculated">
              <label for="slope">Slope (%):</label>
              <input type="number" id="slope" name="slope" value="1.030" step="0.001" class="auto-calculated">
              <div class="calculation-note">Calculated from invert levels and length</div>
            </div>
            
            <div class="parameter-item slope-calculated">
              <label for="totalDrop">Total Drop (m):</label>
              <input type="number" id="totalDrop" name="totalDrop" value="0.360" step="0.001" class="auto-calculated" readonly>
              <div class="calculation-note">Calculated automatically</div>
            </div>
            
            <div class="parameter-item">
              <label for="analysisInterval">Analysis Interval (m):</label>
              <input type="number" id="analysisInterval" name="analysisInterval" value="3" step="0.1">
            </div>
            
            <div class="parameter-item">
              <label for="mhExcavation">MH Excavation (cm):</label>
              <input type="number" id="mhExcavation" name="mhExcavation" value="50" step="1">
            </div>
            
            <div class="parameter-item">
              <label for="icExcavation">IC Excavation (cm):</label>
              <input type="number" id="icExcavation" name="icExcavation" value="35" step="1">
            </div>
            
            <div class="parameter-item">
              <label for="bedding">Bedding Depth (mm):</label>
              <input type="number" id="bedding" name="bedding" value="150" step="1">
            </div>
            
            <div class="parameter-item">
              <label for="backfill">Backfill Depth (mm):</label>
              <input type="number" id="backfill" name="backfill" value="300" step="1">
            </div>
          </div>
          
          <div class="button-group">
            <button type="button" id="recalculate-btn" class="recalculate-btn">üîÑ Recalculate</button>
            <button type="button" id="save-record-btn" class="save-record-btn">üíæ Save Record</button>
            <button type="button" id="professional-report-btn" class="professional-report-btn">üìã Professional Report</button>
          </div>
        </form>

        <!-- Surveyor Information -->
        <div class="surveyor-info-section">
          <h3>Surveyor Information</h3>
          <div class="surveyor-info-grid">
            <div class="surveyor-field">
              <label for="surveyorName">Full Name:</label>
              <input type="text" id="surveyorName" name="name" value="AHMED BARAKAT">
            </div>
            <div class="surveyor-field">
              <label for="surveyorTitle">Professional Title:</label>
              <input type="text" id="surveyorTitle" name="title" value="Professional Surveyor">
            </div>
            <div class="surveyor-field">
              <label for="surveyorContact">Contact Number:</label>
              <input type="text" id="surveyorContact" name="contact" value="0596488146">
            </div>
            <div class="surveyor-field">
              <label for="surveyorLicense">License Number:</label>
              <input type="text" id="surveyorLicense" name="license" value="PS-2024-001">
            </div>
          </div>
          
          <!-- Digital Signature -->
          <div class="signature-section">
            <h4>Digital Signature</h4>
            <div class="signature-container">
              <canvas id="signature-canvas" class="signature-canvas" width="400" height="150"></canvas>
              <div class="signature-controls">
                <button id="clear-signature-btn" class="clear-signature-btn">Clear</button>
                <button id="save-signature-btn" class="save-signature-btn">Save Signature</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Saved Records -->
        <div class="saved-records-section">
          <h3>Saved Records</h3>
          <div class="saved-records-list"></div>
        </div>
      </section>

      <!-- Structures Tab -->
      <section id="structures-tab" class="tab-content structures-section" style="display: none;">
        <div class="structures-header">
          <h2>Project Structures</h2>
          <p>Manage manholes, IC chambers, and other infrastructure elements</p>
        </div>

        <div class="section-name-preview">
          <h3>Current Section</h3>
          <div class="section-name-display">MH-1 - IC Chamber 10</div>
        </div>

        <div class="structures-actions">
          <button id="add-structure-btn" class="add-structure-btn">‚ûï Add Structure</button>
          <button id="sort-structures-btn" class="sort-structures-btn">üîÑ Sort by Chainage</button>
          <button id="update-section-btn" class="update-section-btn">üìù Update Section Name</button>
        </div>

        <div class="structures-table-container">
          <table id="structures-table" class="structures-table">
            <thead>
              <tr>
                <th>Structure Name</th>
                <th>Type</th>
                <th>Chainage (m)</th>
                <th>Cover Level (m)</th>
                <th>Invert Level (m)</th>
                <th>Excavation Depth</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <!-- Populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </section>

      <!-- Civil Survey Profile Tab -->
      <section id="profile-tab" class="tab-content profile-section" style="display: none;">
        <div class="profile-header">
          <div class="profile-title-section">
            <h1>Civil Survey Profile</h1>
            <p>Professional Cross-Sectional Analysis</p>
            <div class="profile-project-info">
              <span>Length: 35m</span>
              <span>Pipe: √ò200mm</span>
              <span>Slope: 1.030%</span>
            </div>
          </div>
          <div class="profile-surveyor-info">
            <div class="surveyor-badge">
              <div class="surveyor-name">AHMED BARAKAT</div>
              <div class="surveyor-title">Professional Surveyor</div>
              <div class="surveyor-contact">0596488146</div>
            </div>
          </div>
        </div>

        <div class="section-name-preview">
          <h3>Section Analysis</h3>
          <div class="section-name-display">MH-1 - IC Chamber 10</div>
        </div>

        <div class="profile-drawing-container">
          <canvas id="profile-canvas" class="profile-canvas" width="1200" height="600"></canvas>
        </div>

        <div class="profile-legend">
          <div class="legend-section">
            <h3>Drawing Legend</h3>
            <div class="legend-items">
              <div class="legend-item">
                <div class="legend-symbol ground-line"></div>
                <span><strong>Ground Level (GL)</strong> - Natural ground surface from structure covers</span>
              </div>
              <div class="legend-item">
                <div class="legend-symbol pipe-line"></div>
                <span><strong>Pipe Invert (IL)</strong> - Bottom of pipe elevation</span>
              </div>
              <div class="legend-item">
                <div class="legend-symbol pipe-line" style="background: rgba(220, 38, 38, 0.3); border: 1px solid #dc2626;"></div>
                <span><strong>Pipe Body</strong> - Actual pipe thickness (√ò200mm)</span>
              </div>
              <div class="legend-item">
                <div class="legend-symbol excavation-line"></div>
                <span><strong>Excavation Level (EL)</strong> - Required excavation depth</span>
              </div>
              <div class="legend-item">
                <div class="legend-symbol manhole-symbol"></div>
                <span><strong>Manhole</strong> - Access structure</span>
              </div>
              <div class="legend-item">
                <div class="legend-symbol ic-symbol"></div>
                <span><strong>IC Chamber</strong> - Inspection chamber</span>
              </div>
            </div>
          </div>

          <div class="legend-section">
            <h3>Technical Specifications</h3>
            <div class="spec-grid">
              <div class="spec-item">
                <span>Start Invert:</span>
                <span>601.000m</span>
              </div>
              <div class="spec-item">
                <span>End Invert:</span>
                <span>600.640m</span>
              </div>
              <div class="spec-item">
                <span>Total Drop:</span>
                <span>0.360m</span>
              </div>
              <div class="spec-item">
                <span>Pipe Diameter:</span>
                <span>√ò200mm</span>
              </div>
              <div class="spec-item">
                <span>Gradient:</span>
                <span>1.030%</span>
              </div>
              <div class="spec-item">
                <span>Analysis Interval:</span>
                <span>3m</span>
              </div>
              <div class="spec-item">
                <span>MH Excavation:</span>
                <span>50cm</span>
              </div>
              <div class="spec-item">
                <span>IC Excavation:</span>
                <span>35cm</span>
              </div>
            </div>
          </div>
        </div>

        <div class="profile-actions">
          <button id="print-profile-btn" class="profile-action-btn primary">
            <span class="btn-icon">üñ®Ô∏è</span>
            PRINT PROFILE
          </button>
          <button id="export-drawing-btn" class="profile-action-btn secondary">
            <span class="btn-icon">üì§</span>
            EXPORT DRAWING
          </button>
          <button id="refresh-profile-btn" class="profile-action-btn tertiary">
            <span class="btn-icon">üîÑ</span>
            REFRESH PROFILE
          </button>
        </div>
      </section>

      <!-- Data Table Tab -->
      <section id="table-tab" class="tab-content table-section" style="display: none;">
        <h2>Survey Data Analysis</h2>
        
        <div class="station-info">
          <p><strong>Section:</strong> <span id="table-section-name">MH-1 - IC Chamber 10</span></p>
          <p><strong>Analysis Interval:</strong> <span id="table-interval">3m</span></p>
          <p><strong>Total Stations:</strong> <span id="total-stations">12</span></p>
        </div>

        <div class="table-container">
          <table id="survey-data-table">
            <thead>
              <tr>
                <th>Station</th>
                <th>Chainage (m)</th>
                <th>Ground Level (m)</th>
                <th>Pipe Invert (m)</th>
                <th>Pipe Crown (m)</th>
                <th>Excavation Level (m)</th>
                <th>Cut Depth (m)</th>
                <th>Cover Depth (m)</th>
              </tr>
            </thead>
            <tbody id="survey-data-tbody">
              <!-- Populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </section>
    </div>

    <script type="module" src="/main.js"></script>
  </body>
</html>